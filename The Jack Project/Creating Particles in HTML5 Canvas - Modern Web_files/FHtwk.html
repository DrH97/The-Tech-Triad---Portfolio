<!DOCTYPE html>
<!-- saved from url=(0147)https://codepen.io/donovanh/embed/FHtwk?height=380&type=result&href=FHtwk&user=donovanh&safe=true&slug-hash=FHtwk&default-tab=result&animations=run -->
<html lang="en" class="js pc"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  
  <meta name="viewport" content="width=device-width">

  <title>CodePen Embed - Canvas example 6</title>

  <link rel="stylesheet" media="all" href="./embed-92f2f31be8d7caa183771c90b2cb4edd571e6b544cee4d07840e78001fea8fb5.css">

  <style>
    .hide {
      display: none !important;
    }
    .embed-nav {
      background: #3d3d3e;
      
    }
    .embed-nav a {
      color: #76daff;
    }
    .embed-nav a.active {
      background: #cccccc;
      color: #000000;
    }
    .embed-nav a.active:after {
      border-top-color: #cccccc;
    }
    .embed-nav .logo-wrap a {
      color: #ffffff;
    }
    .embed-nav .cp-embed-logo {
      fill: #ffffff !important;
    }
  </style>

  <link rel="stylesheet" media="all" href="./twilight-2cb75eda672e6bf9b693686a681374f37c6ea158ece367b9833d6254e47dffe8.css">


    <script async="" src="./analytics.js.download"></script>


</head>

<body onload="resizeEmbedWindow();" id="the-body" style="height: 380px;">

  <div class="embed-nav group" id="embed-nav">

  <ul>
    <li>
      <a id="html-link" href="https://codepen.io/donovanh/embed/FHtwk?height=380&amp;type=result&amp;href=FHtwk&amp;user=donovanh&amp;safe=true&amp;slug-hash=FHtwk&amp;default-tab=result&amp;animations=run#html-box" class="hide ">
        HTML
      </a>
    </li>

    <li>
      <a id="css-link" href="https://codepen.io/donovanh/embed/FHtwk?height=380&amp;type=result&amp;href=FHtwk&amp;user=donovanh&amp;safe=true&amp;slug-hash=FHtwk&amp;default-tab=result&amp;animations=run#css-box" class=" ">
        CSS
      </a>
    </li>

    <li>
      <a id="js-link" href="https://codepen.io/donovanh/embed/FHtwk?height=380&amp;type=result&amp;href=FHtwk&amp;user=donovanh&amp;safe=true&amp;slug-hash=FHtwk&amp;default-tab=result&amp;animations=run#js-box" class=" ">
        JS
      </a>
    </li>

    <li>
      <a id="result-link" href="https://codepen.io/donovanh/embed/FHtwk?height=380&amp;type=result&amp;href=FHtwk&amp;user=donovanh&amp;safe=true&amp;slug-hash=FHtwk&amp;default-tab=result&amp;animations=run#result-box" class="active">
        Result
      </a>
    </li>
  </ul>

  <div class="logo-wrap" id="edit-area">
    <a target="_blank" rel="noopener" href="https://codepen.io/donovanh/pen/FHtwk" title="Edit on CodePen">
      Edit
      <span class="on">on</span>
      <svg id="embed-codepen-logo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="411.438px" height="74.257px" viewBox="0 0 411.438 74.257" enable-background="new 0 0 411.438 74.257" xml:space="preserve">
  <g>
    <path class="cp-embed-logo" d="M25.857 18.232c4.618 0 8.85 1.67 12.14 4.429l4.472-5.33c-4.496-3.779-10.29-6.061-16.61-6.061 C11.6 11.27 0 22.87 0 37.128c0 14.26 11.6 25.86 25.86 25.856c6.32 0 12.114-2.282 16.61-6.061l-4.472-5.33 c-3.286 2.761-7.521 4.429-12.139 4.429c-10.419 0-18.896-8.476-18.896-18.894C6.962 26.71 15.44 18.23 25.86 18.232z"></path>
    <path class="cp-embed-logo" d="M168.993 12.763H155.07c-1.922 0-3.48 1.559-3.48 3.48v41.769c0 1.92 1.56 3.48 3.48 3.48h13.923 c13.436 0 24.365-10.93 24.365-24.365C193.358 23.69 182.43 12.76 168.99 12.763z M168.993 54.532h-10.442V19.725h10.442 c9.597 0 17.4 7.81 17.4 17.404C186.397 46.73 178.59 54.53 168.99 54.532z"></path>
    <path class="cp-embed-logo" d="M212.206 16.244v41.769c0 1.92 1.56 3.48 3.48 3.48h29.007v-6.961h-25.525V40.608h16.243v-6.961h-16.243 V19.725h25.525v-6.961h-29.007C213.765 12.76 212.21 14.32 212.21 16.244z"></path>
    <path class="cp-embed-logo" d="M317.569 16.244v41.769c0 1.92 1.56 3.48 3.48 3.48h29.006v-6.961H324.53V40.608h16.244v-6.961H324.53 V19.725h25.525v-6.961H321.05C319.128 12.76 317.57 14.32 317.57 16.244z"></path>
    <path class="cp-embed-logo" d="M284.443 12.763h-15.084c-1.922 0-3.48 1.559-3.48 3.48v45.25h6.962V40.608h11.603 c7.677 0 13.923-6.246 13.923-13.922C298.366 19.01 292.12 12.76 284.44 12.763z M284.443 33.647h-11.603V19.725h11.603 c3.839 0 6.96 3.12 6.96 6.961S288.282 33.65 284.44 33.647z"></path>
    <path class="cp-embed-logo" d="M404.476 12.763v35.636l-28.652-34.384c-0.938-1.127-2.481-1.545-3.859-1.045 c-1.378 0.5-2.296 1.808-2.296 3.273v45.25h6.962V25.858l28.652 34.383c0.675 0.81 1.66 1.25 2.67 1.25 c0.396 0 0.797-0.066 1.185-0.207c1.378-0.5 2.296-1.808 2.296-3.273v-45.25H404.476z"></path>
    <path class="cp-embed-logo" d="M131.815 25.261c-0.017-0.09-0.032-0.18-0.056-0.268c-0.015-0.053-0.033-0.103-0.05-0.155 c-0.025-0.078-0.051-0.156-0.082-0.232c-0.022-0.053-0.047-0.104-0.071-0.155c-0.034-0.072-0.069-0.143-0.109-0.212 c-0.028-0.051-0.06-0.099-0.091-0.148c-0.043-0.066-0.087-0.131-0.135-0.194c-0.035-0.047-0.071-0.092-0.109-0.137 c-0.05-0.06-0.104-0.117-0.158-0.173c-0.042-0.042-0.084-0.084-0.128-0.125c-0.058-0.053-0.118-0.103-0.181-0.151 c-0.048-0.037-0.095-0.075-0.145-0.109c-0.018-0.013-0.034-0.028-0.053-0.04L96.511 0.536c-1.071-0.715-2.468-0.715-3.539 0 L59.034 23.161c-0.019 0.012-0.034 0.027-0.053 0.04c-0.05 0.035-0.097 0.072-0.145 0.109c-0.062 0.049-0.123 0.099-0.181 0.15 c-0.044 0.04-0.086 0.082-0.127 0.125c-0.056 0.056-0.108 0.113-0.159 0.173c-0.038 0.045-0.074 0.09-0.109 0.14 c-0.048 0.063-0.092 0.127-0.135 0.194c-0.031 0.049-0.062 0.097-0.091 0.148c-0.04 0.069-0.075 0.14-0.108 0.21 c-0.024 0.051-0.05 0.103-0.071 0.155c-0.031 0.076-0.058 0.154-0.083 0.232c-0.017 0.052-0.035 0.103-0.049 0.15 c-0.023 0.088-0.04 0.177-0.056 0.268c-0.009 0.046-0.02 0.091-0.026 0.138c-0.018 0.138-0.028 0.276-0.028 0.417V48.44 c0 0.14 0.01 0.28 0.03 0.417c0.007 0.05 0.02 0.09 0.03 0.138c0.016 0.09 0.03 0.18 0.06 0.27 c0.014 0.05 0.03 0.1 0.05 0.155c0.025 0.08 0.05 0.16 0.08 0.233c0.021 0.05 0.05 0.1 0.07 0.15 c0.033 0.07 0.07 0.14 0.11 0.213c0.028 0.05 0.06 0.1 0.09 0.146c0.043 0.07 0.09 0.13 0.14 0.19 c0.035 0.05 0.07 0.09 0.11 0.138c0.051 0.06 0.1 0.12 0.16 0.173c0.041 0.04 0.08 0.09 0.13 0.12 c0.058 0.05 0.12 0.1 0.18 0.152c0.048 0.04 0.1 0.07 0.14 0.109c0.019 0.01 0.03 0.03 0.05 0.039L92.972 73.72 c0.536 0.36 1.15 0.54 1.77 0.537s1.234-0.18 1.77-0.537l33.938-22.625c0.019-0.012 0.035-0.026 0.053-0.039 c0.05-0.035 0.097-0.072 0.145-0.109c0.062-0.049 0.123-0.1 0.181-0.152c0.044-0.039 0.086-0.082 0.128-0.124 c0.055-0.056 0.108-0.113 0.158-0.173c0.038-0.045 0.074-0.09 0.109-0.138c0.048-0.063 0.092-0.128 0.135-0.194 c0.031-0.048 0.062-0.097 0.091-0.146c0.04-0.07 0.075-0.141 0.109-0.213c0.024-0.051 0.049-0.102 0.071-0.154 c0.031-0.077 0.057-0.155 0.082-0.233c0.017-0.052 0.035-0.103 0.05-0.155c0.023-0.088 0.039-0.178 0.056-0.268 c0.008-0.046 0.02-0.091 0.025-0.138c0.018-0.138 0.028-0.276 0.028-0.417V25.816c0-0.141-0.011-0.279-0.028-0.417 C131.835 25.35 131.82 25.31 131.81 25.261z M94.741 44.677l-11.285-7.548l11.285-7.549l11.286 7.549L94.741 44.677z M91.551 24.037L77.717 33.29L66.55 25.82L91.551 9.153V24.037z M71.978 37.128l-7.982 5.339V31.789L71.978 37.128z M77.717 40.97 l13.834 9.252v14.884L66.55 48.437L77.717 40.968z M97.932 50.22l13.834-9.252l11.168 7.469L97.932 65.104V50.22z M117.505 37.13 l7.983-5.34v10.679L117.505 37.128z M111.766 33.29l-13.834-9.252V9.153l25.002 16.667L111.766 33.29z"></path>
  </g>
</svg>
    </a>
  </div>

</div>


  <div id="output" data-border-style="none" data-header="true" style="height: 346px;">



    <div id="css-box" class="code-box box ">
      <pre class=""><code data-lang="css" id="actual-css-code" data-og-lang="css" data-alt-lang="css" class=" cm-s-default"><span class="cm-tag">body</span> {<br>  <span class="cm-property">margin</span>: <span class="cm-number">0</span>;<br>}</code></pre>

    </div>

    <div id="js-box" class="code-box box ">
      <pre class=""><code data-lang="javascript" id="actual-js-code" data-og-lang="javascript" data-alt-lang="javascript" class=" cm-s-default"><span class="cm-comment">/*</span><br><span class="cm-comment">      Example 6: Adding in walls</span><br><span class="cm-comment">    */</span><br>    <span class="cm-variable">window</span>.<span class="cm-property">onload</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>() {<br><br>      <span class="cm-comment">// Initialise an empty canvas and place it on the page</span><br>      <span class="cm-keyword">var</span> <span class="cm-def">canvas</span> <span class="cm-operator">=</span> <span class="cm-variable">document</span>.<span class="cm-property">createElement</span>(<span class="cm-string">"canvas"</span>);<br>      <span class="cm-keyword">var</span> <span class="cm-def">context</span> <span class="cm-operator">=</span> <span class="cm-variable-2">canvas</span>.<span class="cm-property">getContext</span>(<span class="cm-string">"2d"</span>);<br>      <span class="cm-variable-2">canvas</span>.<span class="cm-property">width</span> <span class="cm-operator">=</span> <span class="cm-variable">window</span>.<span class="cm-property">innerWidth</span> <span class="cm-operator">*</span> <span class="cm-number">0.9</span>;<br>      <span class="cm-variable-2">canvas</span>.<span class="cm-property">height</span> <span class="cm-operator">=</span> <span class="cm-variable">window</span>.<span class="cm-property">innerHeight</span> <span class="cm-operator">*</span> <span class="cm-number">0.9</span>;<br>      <span class="cm-variable">document</span>.<span class="cm-property">body</span>.<span class="cm-property">appendChild</span>(<span class="cm-variable-2">canvas</span>);<br><br>      <span class="cm-comment">// Inital starting position</span><br>      <span class="cm-keyword">var</span> <span class="cm-def">posX</span> <span class="cm-operator">=</span> <span class="cm-number">20</span>,<br>          <span class="cm-def">posY</span> <span class="cm-operator">=</span> <span class="cm-variable-2">canvas</span>.<span class="cm-property">height</span> <span class="cm-operator">/</span> <span class="cm-number">2</span>;<br><br>      <span class="cm-comment">// No longer setting velocites as they will be random</span><br>      <span class="cm-comment">// Set up object to contain particles and set some default values</span><br>      <span class="cm-keyword">var</span> <span class="cm-def">particles</span> <span class="cm-operator">=</span> {},<br>          <span class="cm-def">particleIndex</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>,<br>          <span class="cm-def">settings</span> <span class="cm-operator">=</span> {<br>            <span class="cm-property">density</span>: <span class="cm-number">1</span>,<br>            <span class="cm-property">particleSize</span>: <span class="cm-number">5</span>,<br>            <span class="cm-property">startingX</span>: <span class="cm-variable-2">canvas</span>.<span class="cm-property">width</span> <span class="cm-operator">/</span> <span class="cm-number">2</span>,<br>            <span class="cm-property">startingY</span>: <span class="cm-variable-2">canvas</span>.<span class="cm-property">height</span> <span class="cm-operator">/</span> <span class="cm-number">4</span>,<br>            <span class="cm-property">gravity</span>: <span class="cm-number">0.5</span>,<br>            <span class="cm-property">maxLife</span>: <span class="cm-number">150</span>,<br>            <span class="cm-property">groundLevel</span>: <span class="cm-variable-2">canvas</span>.<span class="cm-property">height</span>,<br>            <span class="cm-property">leftWall</span>: <span class="cm-variable-2">canvas</span>.<span class="cm-property">width</span> <span class="cm-operator">*</span> <span class="cm-number">0.1</span>,<br>            <span class="cm-property">rightWall</span>: <span class="cm-variable-2">canvas</span>.<span class="cm-property">width</span><br>          };<br><br>      <span class="cm-comment">// To optimise the previous script, generate some pseudo-random angles</span><br>      <span class="cm-keyword">var</span> <span class="cm-def">seedsX</span> <span class="cm-operator">=</span> [];<br>      <span class="cm-keyword">var</span> <span class="cm-def">seedsY</span> <span class="cm-operator">=</span> [];<br>      <span class="cm-keyword">var</span> <span class="cm-def">maxAngles</span> <span class="cm-operator">=</span> <span class="cm-number">100</span>;<br>      <span class="cm-keyword">var</span> <span class="cm-def">currentAngle</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;<br><br>      <span class="cm-keyword">function</span> <span class="cm-def">seedAngles</span>() {<br>        <span class="cm-variable-2">seedsX</span> <span class="cm-operator">=</span> [];<br>        <span class="cm-variable-2">seedsY</span> <span class="cm-operator">=</span> [];<br>        <span class="cm-keyword">for</span> (<span class="cm-keyword">var</span> <span class="cm-def">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable-2">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable-2">maxAngles</span>; <span class="cm-variable-2">i</span><span class="cm-operator">++</span>) {<br>          <span class="cm-variable-2">seedsX</span>.<span class="cm-property">push</span>(<span class="cm-variable">Math</span>.<span class="cm-property">random</span>() <span class="cm-operator">*</span> <span class="cm-number">20</span> <span class="cm-operator">-</span> <span class="cm-number">10</span>);<br>          <span class="cm-variable-2">seedsY</span>.<span class="cm-property">push</span>(<span class="cm-variable">Math</span>.<span class="cm-property">random</span>() <span class="cm-operator">*</span> <span class="cm-number">30</span> <span class="cm-operator">-</span> <span class="cm-number">10</span>);<br>        }<br>      }<br><br>      <span class="cm-comment">// Start off with 100 angles ready to go</span><br>      <span class="cm-variable-2">seedAngles</span>();<br><br>      <span class="cm-comment">// Set up a function to create multiple particles</span><br>      <span class="cm-keyword">function</span> <span class="cm-def">Particle</span>() {<br>        <span class="cm-keyword">if</span> (<span class="cm-variable-2">currentAngle</span> <span class="cm-operator">!==</span> <span class="cm-variable-2">maxAngles</span>) {<br>          <span class="cm-comment">// Establish starting positions and velocities</span><br>          <span class="cm-keyword">this</span>.<span class="cm-property">x</span> <span class="cm-operator">=</span> <span class="cm-variable-2">settings</span>.<span class="cm-property">startingX</span>;<br>          <span class="cm-keyword">this</span>.<span class="cm-property">y</span> <span class="cm-operator">=</span> <span class="cm-variable-2">settings</span>.<span class="cm-property">startingY</span>;<br><br>          <span class="cm-keyword">this</span>.<span class="cm-property">vx</span> <span class="cm-operator">=</span> <span class="cm-variable-2">seedsX</span>[<span class="cm-variable-2">currentAngle</span>];<br>          <span class="cm-keyword">this</span>.<span class="cm-property">vy</span> <span class="cm-operator">=</span> <span class="cm-variable-2">seedsY</span>[<span class="cm-variable-2">currentAngle</span>];<br><br>          <span class="cm-variable-2">currentAngle</span><span class="cm-operator">++</span>;<br><br>          <span class="cm-comment">// Add new particle to the index</span><br>          <span class="cm-comment">// Object used as it's simpler to manage that an array</span><br>          <span class="cm-variable-2">particleIndex</span> <span class="cm-operator">++</span>;<br>          <span class="cm-variable-2">particles</span>[<span class="cm-variable-2">particleIndex</span>] <span class="cm-operator">=</span> <span class="cm-keyword">this</span>;<br>          <span class="cm-keyword">this</span>.<span class="cm-property">id</span> <span class="cm-operator">=</span> <span class="cm-variable-2">particleIndex</span>;<br>          <span class="cm-keyword">this</span>.<span class="cm-property">life</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;<br>          <span class="cm-keyword">this</span>.<span class="cm-property">maxLife</span> <span class="cm-operator">=</span> <span class="cm-variable-2">settings</span>.<span class="cm-property">maxLife</span>;<br>        } <span class="cm-keyword">else</span> {<br>          <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">'Generating more seed angles'</span>);<br>          <span class="cm-variable-2">seedAngles</span>();<br>          <span class="cm-variable-2">currentAngle</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;<br>        }<br>      }<br><br>      <span class="cm-comment">// Some prototype methods for the particle's "draw" function</span><br>      <span class="cm-variable-2">Particle</span>.<span class="cm-property">prototype</span>.<span class="cm-property">draw</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>() {<br>        <span class="cm-keyword">this</span>.<span class="cm-property">x</span> <span class="cm-operator">+=</span> <span class="cm-keyword">this</span>.<span class="cm-property">vx</span>;<br>        <span class="cm-keyword">this</span>.<span class="cm-property">y</span> <span class="cm-operator">+=</span> <span class="cm-keyword">this</span>.<span class="cm-property">vy</span>;<br>        <br>        <span class="cm-comment">// Give the particle some bounce</span><br>        <span class="cm-keyword">if</span> ((<span class="cm-keyword">this</span>.<span class="cm-property">y</span> <span class="cm-operator">+</span> <span class="cm-variable-2">settings</span>.<span class="cm-property">particleSize</span>) <span class="cm-operator">&gt;</span> <span class="cm-variable-2">settings</span>.<span class="cm-property">groundLevel</span>) {<br>          <span class="cm-keyword">this</span>.<span class="cm-property">vy</span> <span class="cm-operator">*=</span> <span class="cm-operator">-</span><span class="cm-number">0.6</span>;<br>          <span class="cm-keyword">this</span>.<span class="cm-property">vx</span> <span class="cm-operator">*=</span> <span class="cm-number">0.75</span>;<br>          <span class="cm-keyword">this</span>.<span class="cm-property">y</span> <span class="cm-operator">=</span> <span class="cm-variable-2">settings</span>.<span class="cm-property">groundLevel</span> <span class="cm-operator">-</span> <span class="cm-variable-2">settings</span>.<span class="cm-property">particleSize</span>;<br>        }<br><br>        <span class="cm-comment">// Determine whether to bounce the particle off a wall</span><br>        <span class="cm-keyword">if</span> (<span class="cm-keyword">this</span>.<span class="cm-property">x</span> <span class="cm-operator">-</span> (<span class="cm-variable-2">settings</span>.<span class="cm-property">particleSize</span>) <span class="cm-operator">&lt;=</span> <span class="cm-variable-2">settings</span>.<span class="cm-property">leftWall</span>) {<br>          <span class="cm-keyword">this</span>.<span class="cm-property">vx</span> <span class="cm-operator">*=</span> <span class="cm-operator">-</span><span class="cm-number">1</span>;<br>          <span class="cm-keyword">this</span>.<span class="cm-property">x</span> <span class="cm-operator">=</span> <span class="cm-variable-2">settings</span>.<span class="cm-property">leftWall</span> <span class="cm-operator">+</span> (<span class="cm-variable-2">settings</span>.<span class="cm-property">particleSize</span>);<br>        }<br><br>        <span class="cm-keyword">if</span> (<span class="cm-keyword">this</span>.<span class="cm-property">x</span> <span class="cm-operator">+</span> (<span class="cm-variable-2">settings</span>.<span class="cm-property">particleSize</span>) <span class="cm-operator">&gt;=</span> <span class="cm-variable-2">settings</span>.<span class="cm-property">rightWall</span>) {<br>          <span class="cm-keyword">this</span>.<span class="cm-property">vx</span> <span class="cm-operator">*=</span> <span class="cm-operator">-</span><span class="cm-number">1</span>;<br>          <span class="cm-keyword">this</span>.<span class="cm-property">x</span> <span class="cm-operator">=</span> <span class="cm-variable-2">settings</span>.<span class="cm-property">rightWall</span> <span class="cm-operator">-</span> <span class="cm-variable-2">settings</span>.<span class="cm-property">particleSize</span>;<br>        }<br><br>        <span class="cm-comment">// Adjust for gravity</span><br>        <span class="cm-keyword">this</span>.<span class="cm-property">vy</span> <span class="cm-operator">+=</span> <span class="cm-variable-2">settings</span>.<span class="cm-property">gravity</span>;<br><br>        <span class="cm-comment">// Age the particle</span><br>        <span class="cm-keyword">this</span>.<span class="cm-property">life</span><span class="cm-operator">++</span>;<br><br>        <span class="cm-comment">// If Particle is old, it goes in the chamber for renewal</span><br>        <span class="cm-keyword">if</span> (<span class="cm-keyword">this</span>.<span class="cm-property">life</span> <span class="cm-operator">&gt;=</span> <span class="cm-keyword">this</span>.<span class="cm-property">maxLife</span>) {<br>          <span class="cm-keyword">delete</span> <span class="cm-variable-2">particles</span>[<span class="cm-keyword">this</span>.<span class="cm-property">id</span>];<br>        }<br><br>        <span class="cm-comment">// Create the shapes</span><br>        <span class="cm-comment">//context.fillStyle = "red";</span><br>        <span class="cm-comment">//context.fillRect(this.x, this.y, settings.particleSize, settings.particleSize);</span><br>        <span class="cm-variable-2">context</span>.<span class="cm-property">clearRect</span>(<span class="cm-variable-2">settings</span>.<span class="cm-property">leftWall</span>, <span class="cm-variable-2">settings</span>.<span class="cm-property">groundLevel</span>, <span class="cm-variable-2">canvas</span>.<span class="cm-property">width</span>, <span class="cm-variable-2">canvas</span>.<span class="cm-property">height</span>);<br>        <span class="cm-variable-2">context</span>.<span class="cm-property">beginPath</span>();<br>        <span class="cm-variable-2">context</span>.<span class="cm-property">fillStyle</span><span class="cm-operator">=</span><span class="cm-string">"#0000ff"</span>;<br>        <span class="cm-comment">// Draws a circle of radius 20 at the coordinates 100,100 on the canvas</span><br>        <span class="cm-variable-2">context</span>.<span class="cm-property">arc</span>(<span class="cm-keyword">this</span>.<span class="cm-property">x</span>, <span class="cm-keyword">this</span>.<span class="cm-property">y</span>, <span class="cm-variable-2">settings</span>.<span class="cm-property">particleSize</span>, <span class="cm-number">0</span>, <span class="cm-variable">Math</span>.<span class="cm-property">PI</span><span class="cm-operator">*</span><span class="cm-number">2</span>, <span class="cm-atom">true</span>); <br>        <span class="cm-variable-2">context</span>.<span class="cm-property">closePath</span>();<br>        <span class="cm-variable-2">context</span>.<span class="cm-property">fill</span>();<br>      }<br><br>      <span class="cm-variable">setInterval</span>(<span class="cm-keyword">function</span>() {<br>        <span class="cm-variable-2">context</span>.<span class="cm-property">fillStyle</span> <span class="cm-operator">=</span> <span class="cm-string">"rgba(10,10,10,0.8)"</span>;<br>        <span class="cm-variable-2">context</span>.<span class="cm-property">fillRect</span>(<span class="cm-number">0</span>, <span class="cm-number">0</span>, <span class="cm-variable-2">canvas</span>.<span class="cm-property">width</span>, <span class="cm-variable-2">canvas</span>.<span class="cm-property">height</span>);<br><br>        <span class="cm-comment">// Draw a left, right walls and floor</span><br>        <span class="cm-variable-2">context</span>.<span class="cm-property">fillStyle</span> <span class="cm-operator">=</span> <span class="cm-string">"white"</span>;<br>        <span class="cm-variable-2">context</span>.<span class="cm-property">fillRect</span>(<span class="cm-number">0</span>, <span class="cm-number">0</span>, <span class="cm-variable-2">settings</span>.<span class="cm-property">leftWall</span>, <span class="cm-variable-2">canvas</span>.<span class="cm-property">height</span>);<br>        <span class="cm-variable-2">context</span>.<span class="cm-property">fillRect</span>(<span class="cm-variable-2">settings</span>.<span class="cm-property">rightWall</span>, <span class="cm-number">0</span>, <span class="cm-variable-2">canvas</span>.<span class="cm-property">width</span>, <span class="cm-variable-2">canvas</span>.<span class="cm-property">height</span>);<br>        <span class="cm-variable-2">context</span>.<span class="cm-property">fillRect</span>(<span class="cm-number">0</span>, <span class="cm-variable-2">settings</span>.<span class="cm-property">groundLevel</span>, <span class="cm-variable-2">canvas</span>.<span class="cm-property">width</span>, <span class="cm-variable-2">canvas</span>.<span class="cm-property">height</span>);<br><br>        <span class="cm-comment">// Draw the particles</span><br>        <span class="cm-keyword">for</span> (<span class="cm-keyword">var</span> <span class="cm-def">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable-2">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable-2">settings</span>.<span class="cm-property">density</span>; <span class="cm-variable-2">i</span><span class="cm-operator">++</span>) {<br>          <span class="cm-keyword">new</span> <span class="cm-variable-2">Particle</span>();<br>        }<br><br>        <span class="cm-keyword">for</span> (<span class="cm-keyword">var</span> <span class="cm-def">i</span> <span class="cm-keyword">in</span> <span class="cm-variable-2">particles</span>) {<br>          <span class="cm-variable-2">particles</span>[<span class="cm-variable-2">i</span>].<span class="cm-property">draw</span>();<br>        }<br>      }, <span class="cm-number">30</span>);<br><br><br>    };</code></pre>

    </div>

    <div id="result-box" class="code-box active">
      <iframe id="result-iframe" sandbox="allow-scripts allow-pointer-lock allow-same-origin allow-popups allow-modals allow-forms" allow="geolocation; microphone; camera; midi; vr" src="./FHtwk(1).html" allowtransparency="true" frameborder="0" scrolling="yes" style="height: 348px;" allowfullscreen="true" name="CodePen Preview for Canvas example 6" title="CodePen Preview for Canvas example 6">
      </iframe>
      <a href="https://codepen.io/donovanh/embed/FHtwk?height=380&amp;type=result&amp;href=FHtwk&amp;user=donovanh&amp;safe=true&amp;slug-hash=FHtwk&amp;default-tab=result&amp;animations=run#0" id="rerun-button" class="action-button rerun-button" onclick="Embed.refreshResultIFrame(); return false;">
        Rerun
      </a>
    </div>

  </div>

  

    <script>
      __processedPen = {"html":"","css":"body {\n  margin: 0;\n}","js":"/*\n      Example 6: Adding in walls\n    */\n    window.onload = function() {\n\n      // Initialise an empty canvas and place it on the page\n      var canvas = document.createElement(&quot;canvas&quot;);\n      var context = canvas.getContext(&quot;2d&quot;);\n      canvas.width = window.innerWidth * 0.9;\n      canvas.height = window.innerHeight * 0.9;\n      document.body.appendChild(canvas);\n\n      // Inital starting position\n      var posX = 20,\n          posY = canvas.height / 2;\n\n      // No longer setting velocites as they will be random\n      // Set up object to contain particles and set some default values\n      var particles = {},\n          particleIndex = 0,\n          settings = {\n            density: 1,\n            particleSize: 5,\n            startingX: canvas.width / 2,\n            startingY: canvas.height / 4,\n            gravity: 0.5,\n            maxLife: 150,\n            groundLevel: canvas.height,\n            leftWall: canvas.width * 0.1,\n            rightWall: canvas.width\n          };\n\n      // To optimise the previous script, generate some pseudo-random angles\n      var seedsX = [];\n      var seedsY = [];\n      var maxAngles = 100;\n      var currentAngle = 0;\n\n      function seedAngles() {\n        seedsX = [];\n        seedsY = [];\n        for (var i = 0; i &lt; maxAngles; i++) {\n          seedsX.push(Math.random() * 20 - 10);\n          seedsY.push(Math.random() * 30 - 10);\n        }\n      }\n\n      // Start off with 100 angles ready to go\n      seedAngles();\n\n      // Set up a function to create multiple particles\n      function Particle() {\n        if (currentAngle !== maxAngles) {\n          // Establish starting positions and velocities\n          this.x = settings.startingX;\n          this.y = settings.startingY;\n\n          this.vx = seedsX[currentAngle];\n          this.vy = seedsY[currentAngle];\n\n          currentAngle++;\n\n          // Add new particle to the index\n          // Object used as it&#39;s simpler to manage that an array\n          particleIndex ++;\n          particles[particleIndex] = this;\n          this.id = particleIndex;\n          this.life = 0;\n          this.maxLife = settings.maxLife;\n        } else {\n          console.log(&#39;Generating more seed angles&#39;);\n          seedAngles();\n          currentAngle = 0;\n        }\n      }\n\n      // Some prototype methods for the particle&#39;s &quot;draw&quot; function\n      Particle.prototype.draw = function() {\n        this.x += this.vx;\n        this.y += this.vy;\n        \n        // Give the particle some bounce\n        if ((this.y + settings.particleSize) &gt; settings.groundLevel) {\n          this.vy *= -0.6;\n          this.vx *= 0.75;\n          this.y = settings.groundLevel - settings.particleSize;\n        }\n\n        // Determine whether to bounce the particle off a wall\n        if (this.x - (settings.particleSize) &lt;= settings.leftWall) {\n          this.vx *= -1;\n          this.x = settings.leftWall + (settings.particleSize);\n        }\n\n        if (this.x + (settings.particleSize) &gt;= settings.rightWall) {\n          this.vx *= -1;\n          this.x = settings.rightWall - settings.particleSize;\n        }\n\n        // Adjust for gravity\n        this.vy += settings.gravity;\n\n        // Age the particle\n        this.life++;\n\n        // If Particle is old, it goes in the chamber for renewal\n        if (this.life &gt;= this.maxLife) {\n          delete particles[this.id];\n        }\n\n        // Create the shapes\n        //context.fillStyle = &quot;red&quot;;\n        //context.fillRect(this.x, this.y, settings.particleSize, settings.particleSize);\n        context.clearRect(settings.leftWall, settings.groundLevel, canvas.width, canvas.height);\n        context.beginPath();\n        context.fillStyle=&quot;#0000ff&quot;;\n        // Draws a circle of radius 20 at the coordinates 100,100 on the canvas\n        context.arc(this.x, this.y, settings.particleSize, 0, Math.PI*2, true); \n        context.closePath();\n        context.fill();\n      }\n\n      setInterval(function() {\n        context.fillStyle = &quot;rgba(10,10,10,0.8)&quot;;\n        context.fillRect(0, 0, canvas.width, canvas.height);\n\n        // Draw a left, right walls and floor\n        context.fillStyle = &quot;white&quot;;\n        context.fillRect(0, 0, settings.leftWall, canvas.height);\n        context.fillRect(settings.rightWall, 0, canvas.width, canvas.height);\n        context.fillRect(0, settings.groundLevel, canvas.width, canvas.height);\n\n        // Draw the particles\n        for (var i = 0; i &lt; settings.density; i++) {\n          new Particle();\n        }\n\n        for (var i in particles) {\n          particles[i].draw();\n        }\n      }, 30);\n\n\n    };"};
      __slug_hash = "FHtwk";
      __preprocessors = {
        "html": "HTML",
        "css":  "CSS",
        "js":   "JS"
      };
      __env = "production";
    </script>

  

  <script src="./embed-3b27e11ab0620bcc77ffb2be2974e09011e7b71898ef25fa22386046d3640dd5.js.download"></script>




</body></html>